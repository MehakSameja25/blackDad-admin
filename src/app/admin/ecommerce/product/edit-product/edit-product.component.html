<div class="main-wrapper">
  <app-admin-navbar></app-admin-navbar>
  <div class="page-wrapper">
    <div class="content container-fluid">
      <div class="page-header">
        <div class="content-page-header">
          <h5>Add Product</h5>
        </div>
      </div>
      <div class="row gap-3 mb-3 justify-content-between m-0">
        <div class="col-1 p-0">
          <app-go-back></app-go-back>
        </div>
      </div>

      <form [formGroup]="productForm">
        <div class="row">
          <div class="col-sm-12">
            <div>
              <div>
                <div class="row">
                  <div class="col-8">
                    <div class="card">
                      <div class="card-body">
                        <div>
                          <div class="input-block mb-3">
                            <label>Product Name</label>
                            <input formControlName="productName" type="text" class="form-control"
                              placeholder="Enter Product Name" />
                            <div
                              *ngIf="productForm.get('productName')?.invalid && productForm.get('productName')?.touched"
                              class="text-danger">
                              Product Name is required
                            </div>
                          </div>
                        </div>
                        <div>
                          <div class="input-block mb-3">
                            <label>Description</label>
                            <textarea formControlName="description" class="form-control" placeholder="Enter Notes"
                              rows="5"></textarea>
                            <div
                              *ngIf="productForm.get('description')?.invalid && productForm.get('description')?.touched"
                              class="text-danger">
                              Description is required.
                            </div>
                          </div>
                        </div>
                        <div>
                          <div class="input-block mb-3">
                            <label>Upload Images</label>
                            <div
                              class="service-upload mb-0 d-flex flex-column align-items-center justify-content-center">
                              <span>
                                <img id="bannerPreview" alt="Banner Preview" src="assets/img/drop-icon.svg" />
                              </span>
                              <h6 class="drop-browse align-center">
                                Drop your files here or
                                <span class="text-primary ms-1">browse</span>
                              </h6>
                              <p class="text-muted">Maximum size: 50MB</p>
                              <input type="file" id="bannerImage" (change)="handleImageInput($event, 'banner')"
                                multiple />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card">
                      <div class="card-body">
                        <h6 class="mb-3 fw-semibold">Pricing</h6>
                        <div>
                          <div class="input-block mb-3">
                            <label>Price</label>
                            <input formControlName="price" type="number" class="form-control"
                              placeholder="Enter Price" />
                            <div *ngIf="
                                productForm.get('price')?.invalid &&
                                productForm.get('price')?.touched
                              " class="text-danger">
                              Price is required.
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-4">
                            <div class="input-block mb-3">
                              <label>Cost per item</label>
                              <input type="text" class="form-control" placeholder="0.00" />
                            </div>
                          </div>
                          <div class="col-4">
                            <div class="input-block mb-3">
                              <label>Profit</label>
                              <input type="text" class="form-control" placeholder="--" />

                            </div>
                          </div>
                          <div class="col-4">
                            <div class="input-block mb-3">
                              <label>Margin</label>
                              <input type="text" class="form-control" placeholder="--" />

                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card">
                      <div class="card-body">
                        <h6 class="mb-3 fw-semibold">Variants</h6>
                        <!-- <div class="input-block">
                          <label>Color Options</label>
                          <div class="input-group">
                            <input type="text" class="form-control" [(ngModel)]="newColor" formControlName="colors"
                              placeholder="Enter Color Name" aria-label="Color Name" />
                            <button class="btn btn-outline-secondary" type="button" (click)="addColor()"
                              id="button-addon2">
                              +
                            </button>
                          </div>
                          <div class="d-flex align-items-center gap-2 mt-2">
                            <span *ngFor="let color of colors" class="selected-color">
                              <span class="color-box" [ngStyle]="{ 'background-color': color }"></span>
                              {{ color }}
                              <button class="btn btn-link p-0" (click)="removeColor(color)">
                                <i class="fa-solid fa-xmark"></i>
                              </button>
                            </span>
                            <div *ngIf="
                                productForm.get('colors')?.invalid &&
                                productForm.get('colors')?.touched
                              " class="text-danger">
                              At least one color is required.
                            </div>
                          </div>
                        </div> -->
                        <!-- Size Variant -->
                        <div class="input-block mb-3 vrinp">
                          <div>
                            <label for="size" class="">Size</label>
                            <input type="text" id="size" class="form-control" value="Medium">
                          </div>
                          <div>
                            <label for="price" class="">Price</label>
                            <input type="text" id="price" class="form-control" placeholder="--" value="">
                          </div>
                          <div class=" varientbtn">
                            <label for="price" class="">Action</label>
                            <div class="d-flex align-items-center gap-2">
                              <button class="delete-btn btn btn-outline-danger btn btn-sm">Delete</button>
                              <button class="done-btn btn btn-outline-primary btn-sm">Done</button>
                            </div>
                          </div>
                        </div>
                        <div class="varient-blocklist ">
                          <ul>
                            <li>
                              <div class="vrnme">varients1</div>
                              <div class="varprice">1213.00</div>
                              <div class="text-center"><button class="btn btn-delete"><i
                                    class="bi bi-x-lg"></i></button></div>
                            </li>
                          </ul>
                        </div>
                        <!-- Color input-block -->
                        <div class="input-block mb-3 vrinp">
                          <div>
                            <label for="color" class="">color</label>
                            <input type="text" id="color" class="form-control" value="Black">
                          </div>
                          <div>
                            <label for="price" class="">Price</label>
                            <input type="text" id="price" class="form-control" placeholder="--" value="">
                          </div>
                          <div class=" varientbtn">
                            <label for="price" class="">Action</label>
                            <div class="d-flex align-items-center gap-2">
                              <button class="delete-btn btn btn-outline-danger btn btn-sm">Delete</button>
                              <button class="done-btn btn btn-outline-primary btn-sm">Done</button>
                            </div>
                          </div>
                        </div>

                        <!-- Material input-block -->
                        <div class="input-block mb-3 vrinp">
                          <div>
                            <label for="material" class="">material</label>
                            <input type="text" id="material" class="form-control" value="Rubber">
                          </div>
                          <div>
                            <label for="price" class="">Price</label>
                            <input type="text" id="price" class="form-control" placeholder="--" value="">
                          </div>
                          <div class=" varientbtn">
                            <label for="price" class="">Action</label>
                            <div class="d-flex align-items-center gap-2">
                              <button class="delete-btn btn btn-outline-danger btn btn-sm">Delete</button>
                              <button class="done-btn btn btn-outline-primary btn-sm">Done</button>
                            </div>
                          </div>
                        </div>

                      </div>
                    </div>
                    <div>
                      <div class="row">
                        <div class="col-2" *ngFor="let image of uploadedImages; let i = index">
                          <div class="input-block service-upload service-upload-sm mb-0 position-relative">
                            <button class="btn btn-light position-absolute" (click)="removeImage(i, image.id)">
                              <svg xmlns=" http://www.w3.org/2000/svg" version="1.1"
                                xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" x="0" y="0"
                                viewBox="0 0 512 512" style="enable-background: new 0 0 512 512" xml:space="preserve">
                                <g>
                                  <path
                                    d="M436 60h-75V45c0-24.813-20.187-45-45-45H196c-24.813 0-45 20.187-45 45v15H76c-24.813 0-45 20.187-45 45 0 19.928 13.025 36.861 31.005 42.761L88.76 470.736C90.687 493.875 110.385 512 133.604 512h244.792c23.22 0 42.918-18.125 44.846-41.271l26.753-322.969C467.975 141.861 481 124.928 481 105c0-24.813-20.187-45-45-45zM181 45c0-8.271 6.729-15 15-15h120c8.271 0 15 6.729 15 15v15H181V45zm212.344 423.246c-.643 7.712-7.208 13.754-14.948 13.754H133.604c-7.739 0-14.305-6.042-14.946-13.747L92.294 150h327.412l-26.362 318.246zM436 120H76c-8.271 0-15-6.729-15-15s6.729-15 15-15h360c8.271 0 15 6.729 15 15s-6.729 15-15 15z"
                                    fill="#000000" opacity="1" data-original="#000000"></path>
                                  <path
                                    d="m195.971 436.071-15-242c-.513-8.269-7.67-14.558-15.899-14.043-8.269.513-14.556 7.631-14.044 15.899l15 242.001c.493 7.953 7.097 14.072 14.957 14.072 8.687 0 15.519-7.316 14.986-15.929zM256 180c-8.284 0-15 6.716-15 15v242c0 8.284 6.716 15 15 15s15-6.716 15-15V195c0-8.284-6.716-15-15-15zM346.927 180.029c-8.25-.513-15.387 5.774-15.899 14.043l-15 242c-.511 8.268 5.776 15.386 14.044 15.899 8.273.512 15.387-5.778 15.899-14.043l15-242c.512-8.269-5.775-15.387-14.044-15.899z"
                                    fill="#000000" opacity="1" data-original="#000000"></path>
                                </g>
                              </svg>
                            </button>
                            <span><img src="{{ image.image }}" alt="upload" /></span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="card">
                      <div class="card-body">
                        <div>
                          <div class="input-block mb-3">
                            <label>Stock Status</label>
                            <select formControlName="stockStatus" class="form-select"
                              aria-label="Default select example">
                              <option value="" disabled>Select Stock Status</option>
                              <option [value]="true">In Stock</option>
                              <option [value]="false">Out Of Stock</option>
                            </select>
                            <div *ngIf="
            productForm.get('stockStatus')?.invalid &&
            productForm.get('stockStatus')?.touched
          " class="text-danger">
                              Stock Status is required
                            </div>
                          </div>
                        </div>
                        <div>
                          <div class="input-block mb-3">
                            <label>Category</label>
                            <select formControlName="category" class="form-select" aria-label="Default select example"
                              *ngIf="categories && categories.data">
                              <option value="" disabled>Select Category</option>
                              <option *ngFor="let cat of categories.data" [value]="cat.id">
                                {{ cat.category }}
                              </option>
                            </select>
                            <div *ngIf="
            productForm.get('category')?.invalid &&
            productForm.get('category')?.touched
          " class="text-danger">
                              Category is required
                            </div>
                          </div>
                        </div>
                        <!-- <div>
                          <div class="input-block mb-3">
                            <label>Size Options</label>
                            <div class="input-group">
                              <input type="text" class="form-control" [(ngModel)]="newSize" formControlName="size"
                                placeholder="Enter Size Name" aria-label="Size Name" />
                              <button class="btn btn-outline-secondary" type="button" (click)="addSize()"
                                id="button-addon2">
                                +
                              </button>
                            </div>
                            <div class="d-flex align-items-center gap-2 mt-2">
                              <span *ngFor="let data of sizes" class="selected-color">
                                {{ data }}
                                <button class="btn btn-link p-0" (click)="removeSize(data)">
                                  <i class="fa-solid fa-xmark"></i>
                                </button>
                              </span>
                              <div *ngIf="
              productForm.get('size')?.invalid &&
              productForm.get('size')?.touched
            " class="text-danger">
                                At least one color is required.
                              </div>
                            </div>
                          </div>
                        </div> -->
                        <div>
                          <div class="input-block mb-3">
                            <label>Menufacturers</label>
                            <select formControlName="menufecturer" class="form-select"
                              aria-label="Default select example" *ngIf="manufacturers && manufacturers.mnufacturer">
                              <option value="" disabled>Select Manufacturer</option>
                              <option *ngFor="let man of manufacturers.mnufacturer" [value]="man.id">
                                {{ man.user.name }} , ({{ man.user.email }})
                              </option>
                            </select>
                            <div *ngIf="
            productForm.get('menufecturer')?.invalid &&
            productForm.get('menufecturer')?.touched
          " class="text-danger">
                              Menufecturer is required
                            </div>
                          </div>
                        </div>
                        <div>
                          <div class="input-block mb-3">
                            <label>Product type</label>
                            <select class="form-select">
                              <option value="">New</option>
                              <option value="">Sale</option>
                            </select>

                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="card">
                      <div class="card-body">
                        <h6 class="mb-3 fw-semibold">Inventory</h6>
                        <div class="input-block mb-3">
                          <label>Stock</label>
                          <input formControlName="stock" type="number" class="form-control" placeholder="Quantity" />
                          <div *ngIf="
                              productForm.get('stock')?.invalid &&
                              productForm.get('stock')?.touched
                            " class="text-danger">
                            Stock is required.
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="text-end mt-3">
                  <button type="button" class="btn btn-outline-secondary me-3" (click)="saveData()">
                    Preview
                  </button>
                  <button type="submit" class="btn btn-primary" (click)="onSubmit()">
                    Save
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>